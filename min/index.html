<meta charset=utf-8><title>Super Chrono Portal Maker</title><body bgcolor=0><center><canvas width=1280 height=648 style="border:1px solid;background:#5C94FC;cursor:crosshair"id=a><img src="data:;base64,iVBORw0KGgoAAAANSUhEUgAAA1QAAAAQCAMAAAAmns6IAAAAWlBMVEUAAADFycoAAADjnSWAgID///+xNCVHSUECRYe6YRHJu5wAqADITAz8vLBIAP//slkCa9Mpzv+A0BDEUU9qawSKjsBCQv+wtOb3ORD/AABhY1rIzP4BIkP/2bLDllwqAAAAAnRSTlMAOrCfFIoAAAY2SURBVHhe1duJkqQ2DAZg5Qf6mPveI8n7v2Yk2SCQxjbQM53kT6eNQHZtde1XZpheWhdwUnF3bwG/+mGR/m8XiqFf8/F5EaLzIkTvi5AGGjsGHY80nUtjruDy6IJGCC+c29sXHfiV86KB+/O0czo9Sf5Kw+lEKdXZ5xS6OF1HBIBovhxyxoJmB4C/muOKbcvEMxRmxjntdWINxAabbUfhRLXffQC+KOSksRq3nNR9f2fB/R2Ghaoe5zOyh3REkkcJIio1NZ///HF+XATvfy4iqkYZCc0N53j8/ft4lCPRJLiR3imZsOCnC16qWYMKSKeA70F1HlNCVr9sDROqsXRQahpQQYUty2jgz4SZkcO6dSy16wGVo13tb30aBVPQnMyUBp+imqvq8SmqEcho6ddsZFPPU4aBUQkZnqgzBJWw+vHjh5ISVEpqGLJTKCmJsoKaAjBoQBAJ2YKimrymI8yI3MasQKWkhkG7C47G7EfVcQIyX4fSNxyYUQek5fSdYEFVAyqosGkZq+2Mnxk7aOU6ltqEIirtq/a39m2g+ZegjWrop6CECktUQxp7RfU8i6CSyGTbqRRVOnhXU4pKAkalpDKrhEpdFVCpJTWVjmBkzIypaaPKpkxVNIWc0+mPXagUATqHLNShDA2Hg6A6nM/g9dhYRkWcogaKV+PN0MZlDIoTSlTsoPY6oUPjUaahjAomPPRbUfo0iqiecr4IlZoyVYxJUYFHh2pYhWqIqI4cQ6UpoVJL6f3n16Aa1JSqQsGUqdqFqkuJyGJtZVR5yKgOnUbGhROnoVjG1q3L6OC5glPuoNXraIqoYrMF83zaH7X64ut3qpiIilBCNaxApaYUlQZImDh6AAyLwMc8yfvFqNQUh0lpEEy57EBF+W4tIPN1KH2DoIKgOnO4cn8xL9up6IJlbBMo6129TpRYs24xNfANbjvduVOd9C0+qCAA9Z1KAturIiowqkFt8ThHNexBRWzp+Pp6c/P6KkekqKAv26r4lSCA7M5Pj/4XqKjTRGRwtSv9hENCRbxDAUzM/dSw4UEFuWsRlcW11jA0UbXXsdA+VPYW+81U9dNoo3L+5En6hArYg4obGRVkVFRm6nkNKomh0v3pVaOHc1QooMqm9OhyVJwaqqdFdqE6HB705ZEBEV0srWFcgdfi4iFV2PpIPaKi9aioiopWo6ImKnfBzS+iKhDdgIraqIYU7c23f0kVAAG2H1U/ojJTK1FpqqjALxkjqp8uqGcdqkHzXagOI6qDnZEagDVM5rqDlmO7qVRFGqmsXPUsnOgKOxVnJSpqo8J3ocIX7FQR1Z2gElEyXI7KTBmqR8BQKaZ3QxVv/27E1I3d/mk+RxXSMNVGNaoq7VSnWTaiMkGqxNxIAHRmquNX3pPAdSf9+bJGVRG9Ef/P13TOm2NQv0H69p+pNC1UZGnh/C5U+IKfqSKqe3D4gLP9QQWSJh50ZFRmar5TPbqdioeAapgeVLApPcBGVE00m27/BkG1NOkRtVHBgsQEGrlno3RCUQCdqVt2i0Ft1+6ESpJRsSo1xYVlNypaj4quhor2PqhoUa9tlJp1qCigkq8qlVC5J+pxp8qYdFBUZmrP7V/lkbqaugoqizuB7ajwOAvy3qOoOlWiKDSUw0JSi5m06zqd8lbGjnS+Fv8mKutGu6OGyrquhMpUXYaKHCrNalSmClRApabWovKJv/y13/5eA1UjW1HBRVQASdGI6iGFTJW2jNWDTuMGRYMOkEKTUVnhfhVj5TZUxXmxtC47WtERUcWua6AyVReioiqqHlP6Aqpw99fLoGFQM1OMKgMEpq8p2c9UXGBYBPFrSuk0hiuhGhaBqz0ql4jKzyeiBCYrUhNakoUZkRDJ5hJRRaMQZIb1S6fWCZWFYhlR5QRUFmqjIrj+ZkdEFbv2oMrZgooAP30XKiqhAsSUpY+oJGaKsiX0OSLJ8tH4Qm1EZV+ohX2hdgzov4fqaf7fKlTJy6RGBqum4k27xtFakinyiVB8uQWVm1dFFXm2O6KPyPxqqGgXqilcFG5P7saxxyKujGp7F/pYhODy7gKXwj/9SKEroKpnOyoXY2JaQvXGCVcc15YqX25C5ea1UZET0+qIqHzXFVFRA9U/0X8GNpca52UAAAAASUVORK5CYII"hidden id=tileset><script>c=a.getContext("2d");localStorage["scpm"]=localStorage["scpm"]||1;d=0;n=0;o=false;p=false;x=y=0;s=0;aa=ab=ac=0;ad=0;t={};levels=[,{hash:"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000006565600000000000000006000060000000000000000000000004004000000000000000000000F000000000000044004400000000000000000000G0000000000004440044400007000070000040033333333333333333003333333333333333333333333333333333333300333333333333333333333",pipes:[[]],balances:[],txt:"Move with arrow keys or WASD or ZQSD. Collect all coins and reach the flag.",record:215},{hash:"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006006006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006006000000000000000000002000000000500500500500004000400000000000000F000000000000000000044000440000000000000G0000000000000000004440004440007700000033333333333333333333333333333333333333333333333333333333333333333333333333333333",pipes:[],balances:[],txt:"If you're stuck, restart with R.",record:377},{hash:"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004004004008008000002000000600600600004000000000000000000000000F000000000000044400000000000000000000000G0000000000004444400000000000000000000033388888888888888888888888888888888883333338888888888888888888888888888888888333",pipes:[],balances:[],txt:"Ice is slippy if you're not standing still.",record:254},{hash:"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000020000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000600000<0000000000000000000000000000000000000000000000040000000040000000000<00<004000000000000440000000044000000F000000004400000000004440000000044400000G0000000044400000000444400000000444400033333333333333330333333333333333333333333333333333333333333333333333333333333333",pipes:[],balances:[],txt:"Press space to hold and drop cubes. Jump and press space to throw them.",record:530},{hash:"000000000000000000000000000000000000000000000000<00000000000000000000000000000000000000000000000000000000000000000000000000000099990000000000000000000000000000000000000009000000000000000000000000000000000000:::9000000000000000000000000000000000000000900000000000000000000000000000000000099990000000000000000000000000000000000000009000000000000000000000000000000000000:::900000000000000000000000000000000000000090000000000000000000000000000000000006669000000000000000000000000000020000000000900000<00000000000000000000000000000099990000050000000000000000000000400000000009000000000000000000000000000040F000000009000000000000000000000000000040G0;000000900;000000;00000000000;000000433333333333333333999999933333::::::3333333333333333333333999999933333::::::33333",pipes:[],balances:[],txt:"Yellow switches are all connected.",record:1111},{hash:"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003333333333300000000000440000000000000000000000000000000000000000000000000060000000000000000000000000000000600000000000000<000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000F000000000000000000000000000000000000000G0000000000000000000000000000000000000033333333333333333333333333333333333333333333333333333333333333333333333333333333",pipes:[[8,8,16,6,16],[24,16,6,22,16],[35,7,16,30,5]],balances:[],txt:"Each green switch controls one pipe.",record:724},{hash:"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000<00000000000000000000000000000000000000000000000000000000000000000000000099999999900000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000F000000000000000000000000000000000000000G0000000000000000000000000000000000000333333000000000000000000000000000000000033333300000000000000000000000000000000000000000000000000000000000000000000000040000000000000000000;000060000000000000040000000000000000033333006000000000000004000000000000000003333300600000000333333330000000000000000000000000000000033333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",pipes:[],balances:[[8,9,13,17],[28,6,23,14]],record:306},{hash:"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004444444444444000000000000000000000000000300000000000000000000000000000000000040030606060600000000000000000000000000604003000000000<0000000000000000000000000040030000000000000000000000000000000000004003000004444444000000000000000000000000400300000300000000000000000000000000000040030000030000000000000000000000000000004003000003000000000000000000000000000000400300000300000000000000000000000000000040030000030000000000000000002000000000004003000003000000000000000000000000000000400400F004000000000000000000000000000000400400G0040000000000000000000000000000;040044444440000000000000000003::::::::333300000000000000000000000000000000000000000",pipes:[],balances:[],txt:"Aim with mouse, send portals with left click and right click.",record:342},{hash:"000000000000000000000000000000000000000004444000000000000000000000000000000000000400000000000000000000000000000000000000040000000000000000000000000000000000000004000000000000000000000000000000000000000400000000000000000000000000000000000000040000000000000000000000000000000000000004000000000000000000000000000000000000000400000000000000000000000000000000000000040000000000000000000000000000000000000004000000000000000000000000000000000000000400000000006000000000000000000000000000040000000000000000000000000000000000000004000000000000000000000000000000000002000400000000000000000000000000000000000000040000F000000000000000000000000000000000040000G00000000000000000000000000000000004444444444440000000000008888888888888800000000000000000000000000000000000000000",pipes:[],balances:[],txt:"Use momentum!",record:208},{hash:"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000888888888888888888880000000000000000000030000000000000000008000000000000000000003000000000000000000800000000000000000000300200000000000000080000000000000000000030000000000000000008000000000000000000003000000000006000000800000000000000000000300000770000000000080000000000000000000044444444444440600008000000000000000000003000000000000000000800000000000000000000300000000000600000080000000000000000000030000000000000000008000000000000000000003000000000000000000800000000000000000000300F000000000000000800000000000000000000300G00000000000000080000000000000000000044444444444440000008000000000000000000000000000000000000000000000000000",pipes:[],balances:[],record:266},{hash:"000000000000000000000000000000000000000008888888888888888888888888888888888888800800000000000000000000000000000000000080080000000000000000000000000000000000008008998000000000000000000000000000008:::8008998000000000000000000000000000008:::8008998000000000000000000000000000008:::8008008000000000000000000000000000008000800800800000000000000000000000000000800080080080000000000000000000000000000080008008008000000043333333333300000000008000800800800000044300000300000006666660800080080080000044430000030000000000000080008008008333333333000003002000333333338000800800800000000000000400000000000000000080080000000000000F000400000000000000000080080000000000000G0;040000000000000000008008000000000000333333333300000000000000800000000000000000000000000000000000000000",pipes:[],balances:[],record:589},{hash:"00000000000000000044000000000000000000000000000000000000000000000000000000000000000000000000000002F000000000000000000000000000000000000000G0000000000000000000000000000000000000033000000000000000000000000000000000000000000000000000000000000000000000000060000000000060000000000000000000000000000000000000000000000000000000000000000006000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000<6000000000000000000000000000000000000003300000000000000000000000000000000000000000000000000000000000000000000000000000000044000000000000000000",pipes:[],balances:[[],[19,7,24,4],[19,9,24,15],[19,11,14,15],[19,13,14,4]],record:541},{hash:"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020300000000000000000000000000000000000000030000000000000000000000000000000000000003000000000000000000000000000000333333333300000000000000000000000000000030000000000000000000000000000000000000003000000000000000000000000000000000000000300000000000000000000000000000000000000030000000000000000000000000000000000000003000000000000000000000000306000000000000300000000000000000000000030000000F000000300000000000000000000000030000000G0000003000000000000000000000000333333333333333300000000000000000000000000000000000000000000000000000000",pipes:[[21,16,8,10,16]],balances:[],txt:"Need a little help from the past? Go to the time machine and press Shift!",record:262},{hash:"0000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000006660000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000333009990000000000000000000000000600::0000000000000000000000000000000000000:::000000000000000000000000000000000600::::00000000000000000000000000000000000:::::0000000000000000000000000000000600::::::000000000000000000000000000000000:::::::00000000000000000000000000000600::::::::0000000000000000000000000000000:::::::::0000000000000000000000F0000600::::::::::0000000000000000000000G00;000:::::::::::0000000000000000033333333333333333333333333333333333333333333333333333333333333333333333333333333",pipes:[],balances:[],record:309},{hash:"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000003000000000000000000000000000000000000333300000000000000000000000000000000000030000000000000000000000000000000000000003000000000000000000000000000000000000000300000000000000000000000000000000000000030000000000000000000000000030F000000000030000000000000000000000000030G00000<00003000000000000000000000000003333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",pipes:[],balances:[],record:168},{hash:"00000000000000000000000<0000000000000000000000000000020000000000000000000000000000000000000000000000000<0000000000000000000000000000000000000000000000000000000000000000000004000000000<0000000000000000000000000000000000000000000000000000000000000000000000000000000<0000F000000000000000000000000000000000000000G0000000000000000000000000000000000<0000000000000000000000000000000000000000000000000000000000000000000000000000000<0000000000000000000000000000000000000000000000000000000000000000000000000000000<0000000000000000000000000000000000000000000000000000000000000000000000000000000<0000000000000000000000000000000000000000000000000000000000000000000000000000000<000000000000000000000000033333333333333333333333000000000000000000000000000000000000000000000000",pipes:[],balances:[],record:403},{hash:"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030000000000000000000030000000000000000003000000606060606060603000000000000000000300000000000000000000300000000000000000030999::::::::::::::::3000000000000000000300000000000000000000300000000000000000030000000000000000000030000000000000000003000000000000000000003000000000000000000300000000000000000020300000000000000000030000000000000000000030000000000000000003000000000000000000003000000000000000000300000000000000000000300000000000000000030000000000000000F00030000000000000000003000000;000000000G0003000000000000000000333333333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",pipes:[[11,15,7,21,15]],balances:[],txt:"Sometimes you need to make multiple time travels...",record:736},{hash:"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000060000000000000000000000000000000000000006000000000000000000000000000000000;;;;;;;000000000000000000000000000000000333333300000000000020000000000000000000030000000000000000000000000000000000000003000000000000000003000000000000000000000300000000000000000300F000000000000000000300000000000000000300G0000000000000000003000000000000000003333339999999999993333300000000000000000000003000000000000300000000000000000000000000300000000000030000000000000000000000000030000000000003000000000000000000000000003333333333333300000000000000000000000000000000000000000000000000000000",pipes:[[25,12,7,17,12]],balances:[],txt:"If a past self dies or can't reach the time machine, it's a paradox! *wink wink theme*",record:739},{hash:"0000000000000000000000000000000000000000000000000000000000000000020300000000000000000000000000000000000000030000000000000000000000000000000000003333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030F000000000000000000000000000000000000030G000<00<00<000000000000000000000000000333333333333333300000000000000000000000000000000000000000000000000000000",pipes:[],balances:[],record:596},{hash:"00000000000000000000000000000000000000000000000000000000000<00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000F000000000000000000000000000000000000000G000000000000000000000000000000000000033333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000<00033330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000<0<000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003333330000000000000000000000000000000000000000000000000000000000",pipes:[],balances:[[14,4,19,16]],txt:"Heros and cubes have the same weight.",record:995},{hash:"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000034443000003444300000000090000000000000003000300000300030000000009000000000000000000030000000000000000000900000000000000000003000000000000000000090000000000000000000300;00000000000000009000000000003330000033333000000000000000900000000000000000000000000000000000000090000000000000000000000000000000000000009000000000000000000000000000000000000000900000000000000000000000000000000000000090000000000000000000000000000000000000009020000000000000000000000000000000000000900000000000F000000000000000000000000000900000000000G000000000000000000000000000900000000004444444444444444444444444444444444000000000000000000000000000000000000000000000",pipes:[[24,3,16,3,7]],balances:[[8,12,18,12]],txt:"Only two portals can exist at the same time.",record:1545},{hash:"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000=000000000000000000000000000006060606060=000000000000000000000000000000000000000=00000000000000000000000000000003333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000444000000F000000000000000000000000300004444400000G00000000300000000000000033333333333333333333333330000000000000000000000000000000000000000000000000",pipes:[[24,16,6,19,16]],balances:[[]],txt:"Clouds will block all your future selves!",record:579},{hash:"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000002000000F000000000000000060600000000000000000000G00;000000000000000000000000000000000003333339990:::09990:::09990:::333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",pipes:[],balances:[],txt:"Count in your head: 1-2-3-switch! 1-2-3-switch! I know, this one's terrible.",record:497},{hash:"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000003333333330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000<000000000000000000000000000000000000009990000000000000000000000000000000000000000000000000000000000000000000000000=000000000000000000000000000000000000000=0000000003000000000000000000000003000F0=0000000003000000000000000000000003300G0=0000000003000000000000000003000003333333333333333300000000033300000330;0000000000000000000000000000000000003333330000000000000000003330000000000000000000000000000000000000000000000000000",pipes:[[21,14,5,26,16]],balances:[],txt:"You can grab and throw cubes even if they're not here yet...",record:609},{hash:"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044440000000000000000000000000000000000004000000000000000000000000000000000000000400000000000000000000000000000000000000040000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000009=000000000000000000000000000000000000009=00000600000004000000000000000000000F009=00000000000004000000000000000000000G009=0000070000000400000000000000000000333333333333333344440000000000000000000030000000000000000000000000000000000000;030000000000000000000000000000000888003333000000000000000000000000000000000000000000000000000000000000000000000000000",pipes:[],balances:[],txt:"You can aim and shoot portals even if you're not here yet...",record:611},{hash:"000F000000000000000000000000000000000000000G000000000000000000000000000000000000000000000000000000000000000000000000000000007007000000007070000000000000000000000040404440<004004440000000000000000000000047404000400400404000000000000000000000004440440040040040400000000000000000000000404040004704704040000000000000000000000040404440440440444000000000000000000000000000000000000000000000000000000002000000000000000000000006660660060066060000000000000000000000000888088068008808000000000000000000000000008008008800080800000000===========00000608008800800880868000000000000000000000080800080080008088000000000000000000000008880088088808808080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",pipes:[],balances:[[33,5,24,5],[27,5,30,5]],record:507},{hash:"00000000000000000=000000000000000000000000000000000000000=0F0000300000000000000000003333333330000=0G0;00300000000000000000003000000090000333333330000000000000000000300000009000030000000000000000000000000030000000900033000000000000000000000000003000333333333300000000000000000000000000300000000000333333333333333333333330000030000000000030000000009000000000003000003000000000003020000000900000000000300333333333333300300000000090000000000030030000000:000000300000000070000000000030030000000:000000333444444444444444400030030000000:0000003000000000000000000000300300333333333333300600000000000000000030030000000000000000000000000000000000003003000000000000000000004000000040<000003003388888888888888883344000000044333333300000000000000000000000000000000000000000",pipes:[[36,16,8,34,16]],balances:[],record:1777},{hash:"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000=000000000900000000000000000000000000000=0020F0009900000000000000000000000000000=0000G00999000:000000000000000000000000055555555555000000000000000000000000000000000454000000000:00000000000000000000000000045400000000000000000000000000000000000004540000000:000000000000000000000000000004540000000000000000000000000000000000000454000000000:00000000000000000000000000045400000000000000000000000000000000000004540000000:000000000000000000000000000004540000000000000000000000000000000000000454000000000:00000000000000000000000060045400600000000000000000000000000000000004540000000:000000000000000000<000000000045400;00000000000000000000005555555599955555555555555550000000",pipes:[[12,17,5,15,17]],balances:[],record:715},{hash:"00000000000000000003000000000000000000000000000000000000000300000000000000000000000000000000000000030000000000000000000000000000000000000003000000000000000000000000000000000000000300000000000000000000000000000000000000030000000000000000000000000000000000000003000000000000000000000000000000000000000300000000000000000000000000000000000000030000000000000000000000000000000000000003000000000000000000000000000000000000000300000000000000000000000000000000000000030000020000000000000000000000000000000003000000000000000000000000000000000000000300000000000000000000000000000000000000030000000000000000000000000000000<0<0<0<0300000000000000000000000000000F000000000300000000000000000000000000000G0000000003000000000000000000000000000033333333333333333333300000000000",pipes:[],balances:[],txt:"By the way, did you notice that           cubes can glitch through walls?  ",record:632},{hash:"0033333000000000000000000000000000000<000030F03000000000<<00000000000000000000000030G0300000<<00000000<<0000<0000004000000300030000000<<0000<<0000000000020000000030003000000000<<0000<<0000000000000000003000300000<<0000<<0000000000000000000000300030000000<<0000<<000000000004000000003000300000<<00000000<<000000000000000000300030000000<<000000000000000000000000003000300000<<00000000<<000000000000000000300030000000<<0000<<000000000000000000003000300000<<000000000000000000000000000030003000000000000000<<000000000000000000000000000000<<0000<<000000000000000000000000000000<<00000000<<00000000000000000000000000000000000000000000000000000000000000000000777700007777000000000000000000088888888888888888888888888888888000000000000000000000000000000000000000000000",pipes:[[16,16,8,19,7],[18,16,8,16,7],[33,11,16,28,5]],balances:[[4,3,36,1],[4,4,37,6],[4,5,37,11],[4,6,37,16],[4,7,9,16],[4,8,-1,16],[4,9,1,-1],[28,4,28,6]],txt:"Thanks for playing! Please create and share levels now!",record:735}];draw_tile=function(id,q,r){c.drawImage(b,id*16,0,16,16,q*32,40+r*32,32,32)};draw_sprite=function(id,x,y){c.drawImage(b,id*16,0,16,16,x,y,32,32)};tile_at=function(x,y){if(!t.tiles[~~(y/32)])return 0;return t.tiles[~~(y/32)][~~(x/32)]||0};set_tile=function(x,y,value){if(!t.tiles[~~(y/32)])return;t.tiles[~~(y/32)][~~(x/32)]=value};is_solid=function(id,spikes){if(id==13)document.title=heros.length+" "+hero+" "+frame;return id==13&&hero!=0||spikes&&id==7||solid[id]||0};is_writable=function(q,r){if(!t.tiles[r])return 0;return!t.tiles[r][q]||t.tiles[r][q]<14||t.tiles[r][q]>21};reset_hero=function(){return{x:t&&t.start?t.start[0]*32:640,y:t&&t.start?t.start[1]*32:0,vx:0,vy:0,grounded:0,ab:ab||false,left:[],aa:aa||false,up:[],ac:ac||false,right:[],space:[],shift:[],leftclick:[],rightclick:[],angle:0,direction:1,state:0,cube_held:null,cube_below:null,position_on_cube:null,pick_cube_animation_frame:0,can_jump:true}};reset_current_level=function(timetravel){win=false;coins_left=0;win_frame=0;lose_frame=0;paradox_frame=0;frame=0;current_hero=reset_hero();solid=[0,0,0,1,1,1,0,0,1,1,0,0,0,0,1,0,1,1,1,1,1,0,0,0,0,0];t.cubes=[];yellow_toggle_last_frame=false;yellow_toggle_on=true;yellow_toggle_delay=0;pipes_state=[];balances_state=[];blue_portal={q:-1,r:-1};orange_portal={q:-2,r:-2};if(!timetravel)heros=[]};reset_maker_level=function(){t={tiles:[],pipes:[],balances:[],cubes:[],tested:false};for(j=0;j<20;j++)t.tiles[j]=[];pipe_click=0;current_pipe=0;balance_click=0;current_balance=0;current_editor_tile=0;shared=true;chose_a_tile=false};first_frame=function(){reset_current_level(1);t.tiles=[];for(var j=0;j<20;j++){t.tiles[j]=[];for(var i=0;i<40;i++){t.tiles[j][i]=t.hash.charCodeAt(j*40+i)-48;if(t.tiles[j][i]==15)t.tiles[j][i]=0}}for(var i in t.pipes)pipes_state[i]={pressed:false,y:t.pipes[i][1]*32};for(var i in t.balances)balances_state[i]={y1:t.balances[i][1]*32,y2:t.balances[i][3]*32,weight1:0,weight2:0}};parse_draw_map=function(){for(j=0;j<20;j++)for(i=0;i<40;i++){drawn_tile=t.tiles[j][i];if(drawn_tile==12){drawn_tile=0;if(frame==0)t.cubes.push({x:i*32,y:j*32,vy:0,hero:null})}if(drawn_tile==13&&heros.length==0){c.save();c.globalAlpha=.5;draw_tile(drawn_tile,i,j);c.restore()}else draw_tile(drawn_tile,i,j);if(drawn_tile==2&&frame==0){end_pole=false;if(j<20)for(k=j+1;k<20;k++)if(!t.tiles[k][i]&&!end_pole){draw_tile(24,i,k);t.tiles[k][i]=24}else end_pole=true}if(drawn_tile==23&&frame==0){t.start=[i,j];current_hero.x=t.start[0]*32;current_hero.y=t.start[1]*32}}if(frame==0){for(hero in heros){heros[hero].x=t.start[0]*32;heros[hero].y=t.start[1]*32;heros[hero].vx=0;heros[hero].vy=0;heros[hero].ab=false;heros[hero].aa=false;heros[hero].ac=false;heros[hero].safe=false;heros[hero].direction=1;heros[hero].pickdrop=0;heros[hero].cube_held=null;heros[hero].cube_below=null;heros[hero].position_on_cube=null}for(i in t.cubes)t.cubes[i].hero=null}};gravity_and_collisions=function(obj,obj_width,type){if(typeof obj.cube_held!="undefined"&&obj.cube_held!==null)obj.weight=1+t.cubes[obj.cube_held].weight;if(obj.cube_below!==null&&obj.cube_below!=obj.cube_held){obj.x=t.cubes[obj.cube_below].x+obj.position_on_cube;obj.y=t.cubes[obj.cube_below].y-32;obj.cube_below=null}if(obj.vx>0){obj.portal_target=null;if(tile_at(obj.x+obj_width+obj.vx,obj.y+16)==4&&orange_portal.q>=0&&blue_portal.q==~~((obj.x+obj_width+obj.vx)/32)&&blue_portal.r==~~((obj.y+16)/32)&&blue_portal.side==3)obj.portal_target=orange_portal;if(tile_at(obj.x+obj_width+obj.vx,obj.y+16)==4&&blue_portal.q>=0&&orange_portal.q==~~((obj.x+obj_width+obj.vx)/32)&&orange_portal.r==~~((obj.y+16)/32)&&orange_portal.side==3)obj.portal_target=blue_portal;if(obj.portal_target){obj.y=~~((obj.y+16)/32)*32;obj.vy=0;obj.in_portal=true;if(tile_at(obj.x+obj.vx,obj.y+16)==4){obj.teleport=true;obj.momentum=Math.max(obj.vx,6);obj.vx=0;obj.teleport_idle=8}}else if(is_solid(tile_at(obj.x+obj_width+obj.vx,obj.y))||is_solid(tile_at(obj.x+obj_width+obj.vx,obj.y+31))){obj.x=~~((obj.x+obj.vx)/32)*32+32-obj_width-1;obj.vx=0}if(obj.x>1280-obj_width){obj.x=1280-obj_width;obj.vx=0}for(var j in t.pipes)if(!obj.in_portal&&obj.x+obj_width+obj.vx>=t.pipes[j][0]*32&&obj.x+obj_width+obj.vx<=t.pipes[j][0]*32+16&&obj.y+31>=pipes_state[j].y&&obj.y<=pipes_state[j].y_base){obj.x=t.pipes[j][0]*32-obj_width-1;obj.vx=0}}if(obj.vx<0){obj.portal_target=null;if(tile_at(obj.x+obj.vx,obj.y+16)==4&&orange_portal.q>=0&&blue_portal.q==~~((obj.x+obj.vx)/32)&&blue_portal.r==~~((obj.y+16)/32)&&blue_portal.side==1)obj.portal_target=orange_portal;if(tile_at(obj.x+obj.vx,obj.y+16)==4&&blue_portal.q>=0&&orange_portal.q==~~((obj.x+obj.vx)/32)&&orange_portal.r==~~((obj.y+16)/32)&&orange_portal.side==1)obj.portal_target=blue_portal;if(obj.portal_target){obj.y=~~((obj.y+16)/32)*32;obj.vy=0;obj.in_portal=true;if(tile_at(obj.x+obj.vx+obj_width,obj.y+16)==4){obj.teleport=true;obj.momentum=Math.max(-obj.vx,6);obj.vx=0;obj.teleport_idle=8}}else if(is_solid(tile_at(obj.x+obj.vx,obj.y))||is_solid(tile_at(obj.x+obj.vx,obj.y+31))){obj.x=~~((obj.x+obj.vx)/32)*32+32;obj.vx=0}if(obj.x<0){obj.x=0;obj.vx=0}for(j in t.pipes)if(obj.x+obj.vx>=t.pipes[j][0]*32+64-16&&obj.x+obj.vx<=t.pipes[j][0]*32+64&&obj.y+31>=pipes_state[j].y&&obj.y<=pipes_state[j].y_base){obj.x=t.pipes[j][0]*32+64;obj.vx=0}}obj.x+=obj.vx;if(!obj.in_portal){obj.grounded=false;obj.vy+=2;if(obj.vy>24)obj.vy=24}if(obj.vy>0){obj.portal_target=null;if(tile_at(obj.x+obj_width/2,obj.y+32+obj.vy)==4&&orange_portal.q>=0&&blue_portal.q==~~((obj.x+obj_width/2)/32)&&blue_portal.r==~~((obj.y+32+obj.vy)/32)&&blue_portal.side==0)obj.portal_target=orange_portal;if(tile_at(obj.x+obj.vx/2,obj.y+32+obj.vy)==4&&blue_portal.q>=0&&orange_portal.q==~~((obj.x+obj_width/2)/32)&&orange_portal.r==~~((obj.y+32+obj.vy)/32)&&orange_portal.side==0)obj.portal_target=blue_portal;if(obj.portal_target){obj.x=~~((obj.x+obj_width/2)/32)*32+(32-obj_width)/2;obj.vx=0;obj.in_portal=true;if(obj.vy<10&&tile_at(obj.x+obj_width/2,obj.y+32+obj.vy-16)==4||obj.vy>10&&tile_at(obj.x+obj_width/2,obj.y+32+obj.vy)==4){obj.teleport=true;obj.momentum=Math.max(obj.vy,6);obj.vy=0;obj.teleport_idle=8}}else if(is_solid(tile_at(obj.x,obj.y+32+obj.vy))||is_solid(tile_at(obj.x+obj_width-1,obj.y+32+obj.vy))||type==1&&tile_at(obj.x,obj.y+32+obj.vy)==7||type==1&&tile_at(obj.x+obj_width-1,obj.y+32+obj.vy)==7){obj.y=~~((obj.y+obj.vy)/32)*32;obj.vy=0;obj.grounded=true}for(i in t.cubes)if(!t.cubes[i].in_portal&&!obj.in_portal&&obj.x+obj_width>t.cubes[i].x&&obj.x<t.cubes[i].x+32&&obj.y+31+obj.vy>t.cubes[i].y-8&&obj.y+31+obj.vy<t.cubes[i].y+20){obj.y=t.cubes[i].y-32;obj.vy=0;obj.grounded=true;obj.cube_below=i;obj.position_on_cube=obj.x-t.cubes[i].x;t.cubes[i].weight+=obj.weight}for(j in t.pipes)if(obj.x+obj_width-1>=t.pipes[j][0]*32&&obj.x<t.pipes[j][0]*32+64&&obj.y+31+obj.vy>=pipes_state[j].y&&obj.y+31+obj.vy<=pipes_state[j].y+32){obj.y=pipes_state[j].y-32;obj.vy=0;obj.grounded=true;obj.on_moving_object=true}for(j in t.balances)if(obj.x+obj_width>=t.balances[j][0]*32-32&&obj.x<t.balances[j][0]*32+64&&obj.y+31+obj.vy>=balances_state[j].y1-8&&obj.y+31+obj.vy<=balances_state[j].y1+32){obj.y=balances_state[j].y1-32;obj.vy=0;obj.grounded=true;obj.on_moving_object=true;balances_state[j].weight1+=obj.weight}for(j in t.balances)if(obj.x+obj_width>=t.balances[j][2]*32-32&&obj.x<t.balances[j][2]*32+64&&obj.y+31+obj.vy>=balances_state[j].y2-8&&obj.y+31+obj.vy<=balances_state[j].y2+32){obj.y=balances_state[j].y2-32;obj.vy=0;obj.grounded=true;obj.on_moving_object=true;balances_state[j].weight2+=obj.weight}}if(obj.vy<0){obj.portal_target=null;if(tile_at(obj.x+obj_width/2,obj.y+obj.vy)==4&&orange_portal.q>=0&&blue_portal.q==~~((obj.x+obj_width/2)/32)&&blue_portal.r==~~((obj.y+obj.vy)/32)&&blue_portal.side==2)obj.portal_target=orange_portal;if(tile_at(obj.x+obj.vx/2,obj.y+obj.vy)==4&&blue_portal.q>=0&&orange_portal.q==~~((obj.x+obj_width/2)/32)&&orange_portal.r==~~((obj.y+obj.vy)/32)&&orange_portal.side==2)obj.portal_target=blue_portal;if(obj.portal_target){obj.x=~~((obj.x+obj_width/2)/32)*32+(32-obj_width)/2;obj.vx=0;obj.in_portal=true;if(tile_at(obj.x+obj_width/2,obj.y+obj.vy+10)==4){obj.teleport=true;obj.momentum=6;obj.vy=0;obj.teleport_idle=8}}else if(is_solid(tile_at(obj.x,obj.y+obj.vy))||is_solid(tile_at(obj.x+obj_width,obj.y+obj.vy))){if(tile_at(obj.x,obj.y+obj.vy)==5){set_tile(obj.x,obj.y+obj.vy,0);mkaudio(SNDbrick1).play()}if(tile_at(obj.x+24,obj.y+obj.vy)==5){set_tile(obj.x+24,obj.y+obj.vy,0);mkaudio(SNDbrick1).play()}obj.y=~~((obj.y+obj.vy)/32)*32+32;obj.vy=0}}obj.y+=obj.vy;if(obj.teleport){obj.teleport=false;obj.grounded=false;obj.x=obj.portal_target.q*32+(32-obj_width)/2;obj.y=obj.portal_target.r*32;if(obj.portal_target.side==0){obj.vy=-obj.momentum;obj.vx=0}if(obj.portal_target.side==1){obj.vx=obj.momentum;obj.vy=0;obj.x+=8}if(obj.portal_target.side==2){obj.vy=obj.momentum;obj.vx=0;obj.y+=8;obj.teleport_idle=2}if(obj.portal_target.side==3){obj.vx=-obj.momentum;obj.vy=0;obj.x-=8}}if(tile_at(obj.x,obj.y+20)==11){set_tile(obj.x,obj.y+20,25);yellow_toggle=true}else if(tile_at(obj.x+obj_width,obj.y+20)==11){set_tile(obj.x+obj_width,obj.y+20,25);yellow_toggle=true}for(var i in t.pipes)if(obj.x+obj_width>=t.pipes[i][3]*32&&obj.x<=t.pipes[i][3]*32+32&&obj.y+32>=t.pipes[i][4]*32&&obj.y+20<=t.pipes[i][4]*32+32)pipes_state[i].pressed=true};play_hero=function(this_hero,past){if(this_hero.state!=3&&!win&&!paradox_frame){this_hero.state=0;this_hero.on_moving_object=false;if(!this_hero.teleport_idle){if(this_hero.grounded&&tile_at(this_hero.x,this_hero.y+33)!=8&&tile_at(this_hero.x+24,this_hero.y+33)!=8||!this_hero.grounded&&Math.abs(this_hero.vx)<10)this_hero.vx=0;if(this_hero.right[frame]&&!((tile_at(this_hero.x,this_hero.y+33)==8||tile_at(this_hero.x+24,this_hero.y+33)==8)&&this_hero.vx!=0)){if(this_hero.direction==1)this_hero.vx=Math.max(this_hero.vx,6);else this_hero.vx=0;this_hero.direction=1;if(this_hero.grounded)this_hero.state=1}if(this_hero.left[frame]&&!((tile_at(this_hero.x,this_hero.y+33)==8||tile_at(this_hero.x+24,this_hero.y+33)==8)&&this_hero.vx!=0)){if(this_hero.direction==0)this_hero.vx=Math.min(this_hero.vx,-6);else this_hero.vx=0;this_hero.direction=0;if(this_hero.grounded)this_hero.state=1}}if(!this_hero.in_portal&&this_hero.up[frame]&&this_hero.grounded&&!((tile_at(this_hero.x,this_hero.y+33)==8||tile_at(this_hero.x+24,this_hero.y+33)==8)&&this_hero.vx!=0)){this_hero.vy-=20;this_hero.grounded=false;this_hero.aa=false;this_hero.can_jump=false;this_hero.cube_below=null;mkaudio(SNDjump2).play()}if(this_hero.vy<0&&!this_hero.grounded)this_hero.state=2;gravity_and_collisions(this_hero,24,0);if(tile_at(this_hero.x+24/2-8,this_hero.y+16-8)==6){set_tile(this_hero.x+24/2-8,this_hero.y+16-8,0);mkaudio(SNDcoin1).play()}if(tile_at(this_hero.x+24/2+8,this_hero.y+16-8)==6){set_tile(this_hero.x+24/2+8,this_hero.y+16-8,0);mkaudio(SNDcoin1).play()}if(tile_at(this_hero.x+24/2-8,this_hero.y+16+8)==6){set_tile(this_hero.x+24/2-8,this_hero.y+16+8,0);mkaudio(SNDcoin1).play()}if(tile_at(this_hero.x+24/2+8,this_hero.y+16+8)==6){set_tile(this_hero.x+24/2+8,this_hero.y+16+8,0);mkaudio(SNDcoin1).play()}if(this_hero.shift[frame])if(tile_at(this_hero.x,this_hero.y)==23||tile_at(this_hero.x+24,this_hero.y)==23||tile_at(this_hero.x,this_hero.y+31)==23||tile_at(this_hero.x+24,this_hero.y+31)==23){if(!past){this_hero.last_frame=frame;heros.push(this_hero);frame=-1;current_hero=reset_hero()}else this_hero.safe=true;mkaudio(SNDtimetravel0).play()}if(tile_at(this_hero.x+3,this_hero.y)==7||tile_at(this_hero.x+24-3,this_hero.y)==7||tile_at(this_hero.x+3,this_hero.y+5)==7||tile_at(this_hero.x+24-3,this_hero.y+5)==7){this_hero.state=3;this_hero.vy=-1*20}if(this_hero.y>648){this_hero.state=3;this_hero.vy=-1.5*20}if(tile_at(this_hero.x+1,this_hero.y+1)==9||tile_at(this_hero.x+24-1,this_hero.y+1)==9||tile_at(this_hero.x+1,this_hero.y+31)==9||tile_at(this_hero.x+24-1,this_hero.y+31)==9){this_hero.state=3;this_hero.vy=-1.5*20}if(this_hero.on_moving_object&&(is_solid(tile_at(this_hero.x,this_hero.y+1))||is_solid(tile_at(this_hero.x+24,this_hero.y+1)))){this_hero.state=3;this_hero.vy=-1*20}if(this_hero.space[frame])this_hero.pickdrop^=1;if(this_hero.pickdrop){if(this_hero.cube_held===null)for(i in t.cubes)if(this_hero.x+24>=t.cubes[i].x&&this_hero.x<=t.cubes[i].x+31&&this_hero.y+31+4>=t.cubes[i].y&&this_hero.y<=t.cubes[i].y+31){this_hero.cube_held=i;t.cubes[i].hero=this_hero;this_hero.pick_cube_animation_frame=5;break}}else if(current_cube=t.cubes[this_hero.cube_held]){current_cube.x=this_hero.x;current_cube.cube_below=null;if(!this_hero.grounded)if(this_hero.direction==0)current_cube.vx=-14;else current_cube.vx=14;if(is_solid(tile_at(current_cube.x,current_cube.y)))current_cube.x=~~(current_cube.x/32)*32+32;else if(is_solid(tile_at(current_cube.x,current_cube.y+31)))current_cube.x=~~(current_cube.x/32)*32+32;else if(is_solid(tile_at(current_cube.x+32,current_cube.y)))current_cube.x=~~(current_cube.x/32)*32-1;else if(is_solid(tile_at(current_cube.x+32,current_cube.y+31)))current_cube.x=~~(current_cube.x/32)*32-1;current_cube.hero=null;t.cubes[this_hero.cube_held]=current_cube;this_hero.cube_held=null;this_hero.weight=1}if(this_hero.cube_held!==null){if(this_hero.direction==0)t.cubes[this_hero.cube_held].x=this_hero.x-6;if(this_hero.direction==1)t.cubes[this_hero.cube_held].x=this_hero.x-4;if(this_hero.pick_cube_animation_frame)this_hero.pick_cube_animation_frame--;if(this_hero.in_portal)t.cubes[this_hero.cube_held].y=this_hero.y;else if(is_solid(tile_at(this_hero.x,this_hero.y-28))||is_solid(tile_at(this_hero.x+24,this_hero.y-28)))t.cubes[this_hero.cube_held].y=~~((this_hero.y+4)/32)*32;else t.cubes[this_hero.cube_held].y=this_hero.y-32+this_hero.pick_cube_animation_frame*4}else this_hero.pickdrop=0;if(tile_at(this_hero.x+24/2,this_hero.y+16)==2||tile_at(this_hero.x+24/2,this_hero.y+16)==24){coins_left=0;for(j=0;j<20;j++)for(i=0;i<40;i++)if(t.tiles[j][i]==6)coins_left++;if(coins_left==0){win=true;this_hero.state=0}}if(!this_hero.in_portal&&(this_hero.leftclick[frame]||this_hero.rightclick[frame])){this_hero.shoot_blue=0;this_hero.shoot_orange=0;if(this_hero.leftclick[frame]){this_hero.shoot_blue=1;this_hero.angle=Math.atan2(this_hero.leftclick[frame][0]-(this_hero.x+24/2),this_hero.leftclick[frame][1]-(this_hero.y+40+16))}if(this_hero.rightclick[frame]){this_hero.shoot_orange=1;this_hero.angle=Math.atan2(this_hero.rightclick[frame][0]-(this_hero.x+24/2),this_hero.rightclick[frame][1]-(this_hero.y+40+16))}this_hero.portal_shoot_x=this_hero.x+24/2;this_hero.portal_shoot_y=this_hero.y+16;this_hero.portal_shoot_vx=Math.sin(this_hero.angle);this_hero.portal_shoot_vy=Math.cos(this_hero.angle)}for(current_portal in portals=[["shoot_blue",blue_portal,"blue"],["shoot_orange",orange_portal,"orange"]])if(this_hero[portals[current_portal][0]])for(i=0;i<40;i++){this_hero[portals[current_portal][0]]+=.001;this_hero.portal_shoot_x+=this_hero[portals[current_portal][0]]*this_hero.portal_shoot_vx;this_hero.portal_shoot_y+=this_hero[portals[current_portal][0]]*this_hero.portal_shoot_vy;if(is_solid(tile_at(this_hero.portal_shoot_x,this_hero.portal_shoot_y))||tile_at(this_hero.portal_shoot_x,this_hero.portal_shoot_y)==7){this_hero[portals[current_portal][0]]=0;if(this_hero.portal_shoot_x%32<4&&!is_solid(tile_at(this_hero.portal_shoot_x-32,this_hero.portal_shoot_y))&&this_hero.portal_shoot_vx>0)temp_side=3;if(this_hero.portal_shoot_x%32>28&&!is_solid(tile_at(this_hero.portal_shoot_x+32,this_hero.portal_shoot_y))&&this_hero.portal_shoot_vx<0)temp_side=1;if(this_hero.portal_shoot_y%32<4&&!is_solid(tile_at(this_hero.portal_shoot_x,this_hero.portal_shoot_y-32))&&this_hero.portal_shoot_vy>0)temp_side=0;if(this_hero.portal_shoot_y%32>28&&!is_solid(tile_at(this_hero.portal_shoot_x,this_hero.portal_shoot_y+32))&&this_hero.portal_shoot_vy<0)temp_side=2;if(tile_at(this_hero.portal_shoot_x,this_hero.portal_shoot_y)==8){this_hero[portals[current_portal][0]]=1;if(temp_side==0){this_hero.portal_shoot_vy=-this_hero.portal_shoot_vy;this_hero.portal_shoot_y=~~(this_hero.portal_shoot_y/32)*32-1}else if(temp_side==2){this_hero.portal_shoot_vy=-this_hero.portal_shoot_vy;this_hero.portal_shoot_y=~~(this_hero.portal_shoot_y/32)*32+32+1}else if(temp_side==1){this_hero.portal_shoot_vx=-this_hero.portal_shoot_vx;this_hero.portal_shoot_x=~~(this_hero.portal_shoot_x/32)*32+32+1}else{this_hero.portal_shoot_vx=-this_hero.portal_shoot_vx;this_hero.portal_shoot_x=~~(this_hero.portal_shoot_x/32)*32-1}}if(tile_at(this_hero.portal_shoot_x,this_hero.portal_shoot_y)==4&&(~~(this_hero.portal_shoot_x/32)!=portals[1-current_portal][1].q||~~(this_hero.portal_shoot_y/32)!=portals[1-current_portal][1].r||portals[1-current_portal][1].side!=temp_side)){portals[current_portal][1].q=~~(this_hero.portal_shoot_x/32);portals[current_portal][1].r=~~(this_hero.portal_shoot_y/32);portals[current_portal][1].side=temp_side}break}else{c.fillStyle=portals[current_portal][2];c.fillRect(this_hero.portal_shoot_x,this_hero.portal_shoot_y+40,6,6)}}if(tile_at(this_hero.x+1,this_hero.y+1)!=4&&tile_at(this_hero.x+24-1,this_hero.y+1)!=4&&tile_at(this_hero.x+1,this_hero.y+31)!=4&&tile_at(this_hero.x+ +24-1,this_hero.y+31)!=4)this_hero.in_portal=false;if(this_hero.teleport_idle)this_hero.teleport_idle--}if(this_hero.state==3){this_hero.vy+=2;if(this_hero.vy>24)this_hero.vy=24;this_hero.y+=this_hero.vy}};draw_hero=function(hero,past){c.save();c.translate(hero.x+24/2-2,hero.y);if(hero.direction==0)c.scale(-1,1);if(past)c.globalAlpha=.75;else if(heros.length){c.fillStyle="#fff";c.fillText("\u25bc",0,10)}if(!(past&&frame>hero.last_frame))c.drawImage(b,[26,[27,28,29][~~(frame/2)%3],30,31][hero.state]*16,0,16,16,-24/2,40,32,32);c.restore()};onclick=oncontextmenu=function(e){handle_clicks(e);return false};onmousedown=function(e){o=true;if(e.which==3)p=true;else p=false};onmouseup=function(){o=false};onmousemove=function(e){x=e.pageX-a.getBoundingClientRect().left-document.documentElement.scrollLeft-document.body.scrollLeft;y=e.pageY-a.getBoundingClientRect().top-document.documentElement.scrollTop-document.body.scrollTop;q=Math.floor(x/32);r=Math.floor((y-40)/32);if(d==3){if(o&&current_editor_tile!=14&&current_editor_tile!=15)handle_clicks(e);draw_screen(1)}};handle_clicks=function(e){if(d==0){c.beginPath();c.rect(500,400,100,80);if(c.isPointInPath(x,y)){d=1;draw_screen()}c.closePath();c.beginPath();c.rect(650,400,100,80);if(c.isPointInPath(x,y)){d=3;reset_maker_level();draw_screen()}c.closePath()}if(d==1){c.beginPath();c.rect(30,30,50,50);if(c.isPointInPath(x,y)){d=0;draw_screen()}c.closePath();c.beginPath();c.rect(590,520,100,80);if(c.isPointInPath(x,y))window.open("https://twitter.com/search?f=tweets&q=%23SuperChronoPortalMaker");c.closePath();for(i=0;i<10;i++)for(j=0;j<3;j++){m=j*10+i+1;if(+localStorage["scpm"]>=m){c.beginPath();c.rect(i*120+50,j*100+120,100,80);if(c.isPointInPath(x,y)){n=1;d=2;chrono=0;s=m;t=levels[m];draw_screen()}c.closePath()}}}if(d==2&&frame>0){if(e.which==1)current_hero.leftclick[frame]=[x,y];if(e.which==3)current_hero.rightclick[frame]=[x,y];c.beginPath();c.rect(1240,0,32,32);if(c.isPointInPath(x,y)){clearInterval(ad);d=n;draw_screen()}c.closePath()}if(d==3){t.hash="";for(j=0;j<20;j++)for(i=0;i<40;i++){tile=t.tiles[j][i]||0;tile=tile<16||tile>21?tile:0;t.hash+=String.fromCharCode(tile+48)}c.beginPath();c.rect(750,4,100,32);if(c.isPointInPath(x,y)){n=3;d=2;draw_screen()}c.closePath();c.beginPath();c.rect(875,4,100,32);if(c.isPointInPath(x,y)){location.hash="";if(t.tested==false)alert("You need to test and win your level first.");else{window.open("https://www.twitter.com/intent/tweet?text="+encodeURIComponent("I made a level for #SuperChronoPortalMaker !\nPlay the game here: "+location.origin+location.pathname+". \nPlay my level here:"+encodeURI(location.origin+location.pathname+"#"+JSON.stringify({hash:t.hash,pipes:t.pipes,balances:t.balances}))+"\nPlz RT"));shared=true}}c.closePath();c.beginPath();c.rect(1E3,4,100,32);if(c.isPointInPath(x,y)){reset_maker_level();draw_screen()}c.closePath();c.beginPath();c.rect(1125,4,100,32);if(c.isPointInPath(x,y))if(shared||!shared&&confirm("Quit? This level will be lost!")){d=0;draw_screen()}c.closePath();for(i=0;i<16;i++){c.beginPath();c.rect(8.5+i*35,3.5,32,32);if(c.isPointInPath(x,y)&&pipe_click==0&&balance_click==0){chose_a_tile=true;current_editor_tile=i;if(current_editor_tile==14)t.pipes[current_pipe]=[];if(current_editor_tile==15)t.balances[current_balance]=[];draw_screen()}c.closePath()}c.beginPath();c.rect(0,40,1280,608);if(c.isPointInPath(x,y)){if(chose_a_tile)shared=false;t.tested=false;if(p==true){if(t.tiles[r][q]==22){t.tiles[r][q]=0;t.tiles[r+1][q]=0}if(t.tiles[r][q]==23){t.tiles[r][q]=0;t.tiles[r-1][q]=0}if(is_writable(q,r))t.tiles[r][q]=0;if(pipe_click==0){if(t.tiles[r][q]==16)for(i in t.pipes)if(t.pipes[i][0]==q&&(t.pipes[i][1]==r||t.pipes[i][2]==r)){for(j=t.pipes[i][1];j<20;j++)if(t.tiles[j][q]==16||t.tiles[j][q]==18){t.tiles[j][q]=0;t.tiles[j][q+1]=0}else break;for(j=t.pipes[i][2];j<20;j++)if(t.tiles[j][q]==16||t.tiles[j][q]==18){t.tiles[j][q]=0;t.tiles[j][q+1]=0}else break;t.tiles[t.pipes[i][4]][t.pipes[i][3]]=0;delete t.pipes[i]}if(t.tiles[r][q]==17)for(i in t.pipes)if(t.pipes[i][0]==q-1&&(t.pipes[i][1]==r||t.pipes[i][2]==r)){for(j=t.pipes[i][1];j<20;j++)if(t.tiles[j][q]==17||t.tiles[j][q]==19){t.tiles[j][q]=0;t.tiles[j][q-1]=0}else break;for(j=t.pipes[i][2];j<20;j++)if(t.tiles[j][q]==17||t.tiles[j][q]==19){t.tiles[j][q]=0;t.tiles[j][q-1]=0}else break;t.tiles[t.pipes[i][4]][t.pipes[i][3]]=0;delete t.pipes[i]}t.tmp=t.pipes;t.pipes=[];for(i in t.tmp)if(t.tmp[i])t.pipes.push(t.tmp[i])}if(balance_click==0){if(t.tiles[r][q]==15)for(i in t.balances)if(t.balances[i][1]==r&&(t.balances[i][0]==q||t.balances[i][0]==q-1||t.balances[i][0]==q+1)||t.balances[i][3]==r&&(t.balances[i][2]==q||t.balances[i][2]==q-1||t.balances[i][2]==q+1)){t.tiles[t.balances[i][1]][t.balances[i][0]]=0;t.tiles[t.balances[i][1]][t.balances[i][0]-1]=0;t.tiles[t.balances[i][1]][t.balances[i][0]+1]=0;t.tiles[t.balances[i][3]][t.balances[i][2]]=0;t.tiles[t.balances[i][3]][t.balances[i][2]-1]=0;t.tiles[t.balances[i][3]][t.balances[i][2]+1]=0;delete t.balances[i]}t.tmp=t.balances;t.balances=[];for(i in t.tmp)if(t.tmp[i])t.balances.push(t.tmp[i])}}else if(current_editor_tile==1){if(r>0&&is_writable(q,r)&&is_writable(q,r-1)){for(j in t.tiles)for(i in t.tiles[j])if(t.tiles[j][i]==22||t.tiles[j][i]==23)t.tiles[j][i]=0;t.tiles[r-1][q]=22;t.tiles[r][q]=23}}else if(current_editor_tile==2){if(is_writable(q,r)){for(j in t.tiles)for(i in t.tiles[j])if(t.tiles[j][i]==2)t.tiles[j][i]=0;t.tiles[r][q]=2}}else if(current_editor_tile==14){if(is_writable(q,r)&&is_writable(q+1,r))if(pipe_click==0){t.pipes[current_pipe]=[];t.pipes[current_pipe][0]=q;t.pipes[current_pipe][1]=r;t.tiles[r][q]=16;t.tiles[r][q+1]=17;pipe_click++}else if(pipe_click==1){if(true){t.pipes[current_pipe][2]=r;t.tiles[r][t.pipes[current_pipe][0]]=16;t.tiles[r][t.pipes[current_pipe][0]+1]=17;pipe_click++}}else if(pipe_click==2){t.pipes[current_pipe][3]=q;t.pipes[current_pipe][4]=r;t.tiles[r][q]=20;current_pipe++;pipe_click=0}}else if(current_editor_tile==15){if(is_writable(q-1,r)&&is_writable(q,r)&&is_writable(q+1,r)){if(balance_click==0){t.balances[current_balance]=[];t.balances[current_balance][0]=q;t.balances[current_balance][1]=r;balance_click++}else if(balance_click==1){t.balances[current_balance][2]=q;t.balances[current_balance][3]=r;current_balance++;balance_click=0}t.tiles[r][q-1]=15;t.tiles[r][q]=15;t.tiles[r][q+1]=15}}else if(is_writable(q,r))t.tiles[r][q]=current_editor_tile;draw_screen(1)}c.closePath()}};onkeydown=function(e){if(d==2){if(e.keyCode==38||e.keyCode==90||e.keyCode==87)if(current_hero.can_jump){current_hero.aa=true;current_hero.can_jump=false;aa=true}if(e.keyCode==39||e.keyCode==68){current_hero.ac=true;ac=true}if(e.keyCode==37||e.keyCode==65||e.keyCode==81){current_hero.ab=true;ab=true}}};onkeyup=function(e){if(d==2){if(e.keyCode==38||e.keyCode==90||e.keyCode==87){current_hero.aa=false;current_hero.can_jump=true;aa=false}if(e.keyCode==39||e.keyCode==68){current_hero.ac=false;ac=false}if(e.keyCode==37||e.keyCode==65||e.keyCode==81){current_hero.ab=false;ab=false}if(e.keyCode==82){reset_current_level();chrono=0}if(e.keyCode==32)current_hero.space[frame]=true;if(e.keyCode==16)current_hero.shift[frame]=true}};draw_screen=onload=onhashchange=function(no_reset){a.width^=0;c.font="bold 30px arial";c.textAlign="center";c["mozImageSmoothingEnabled"]=false;c["imageSmoothingEnabled"]=false;if(d==0){a.style.cursor="pointer";t={hash:"0000==0000000000000000000000000000000000000====0000000000000000000000000000000000000000000000000000000000000000===000000000000000000000000000000000000=====00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000900000000000000059595000000000000000000000000000000000000000000000@A00000000000000000000000000000000000000BC00J00000000000000000000000000000000000BC03333333333333333333333333333333333333333",pipes:[[35,15,17,40,17]],balances:[]};heros=[,];first_frame();parse_draw_map();c.drawImage(b,512,0,70,16,120,150,280,64);c.drawImage(b,583,0,270,16,120,250,1080,64);c.fillStyle="#000";c.beginPath();c.fillRect(500,400,100,80);c.fillRect(650,400,100,80);c.fillStyle="#fff";c.fillText("MAKE",700,450);c.fillText("PLAY",550,450);c.stroke();c.closePath()}if(d==1){a.style.cursor="pointer";c.beginPath();c.fillStyle="#000";c.fillRect(590,520,100,80);k=0;for(i=0;i<10;i++)for(j=0;j<3;j++){l=j*10+i+1;c.fillStyle="#000";c.fillRect(i*120+50,j*100+120,100,80);c.fillStyle="#fff";c.fillText(+localStorage["scpm"]>=l?l:"?",i*120+100,j*100+170);if(localStorage["scpm"+l]<=levels[l].record)c.fillText("\ud83c\udfc5",i*120+135,j*100+145);k+=+localStorage["scpm"+l]||0}c.fillText("\u25c0",40,70);c.fillText("JS13K LEVELS",640,70);c.fillText("TWITTER LEVELS",640,470);c.fillText("GO",640,570);c.fillStyle="#000";if(k)c.fillText("Total time: "+~~(k/30/60)+":"+("0"+(k/30%60).toFixed(2)).slice(-5),1100,450);c.stroke();c.closePath()}if(d==2){a.style.cursor="crosshair";if(ad)clearInterval(ad);reset_current_level();ad=setInterval(function(){a.width^=0;c.font="bold 30px arial";c.fillStyle="#000";c.fillText("\u00d7",1255,25);if(n==1){c.font="bold 30px arial";c.fillStyle="black";c.textAlign="center";c.fillText(t.txt||"",640,80)}if(current_hero.ab)current_hero.left[frame]=true;if(current_hero.ac)current_hero.right[frame]=true;if(current_hero.aa)current_hero.up[frame]=true;c.mozImageSmoothingEnabled=false;c.imageSmoothingEnabled=false;if(frame==0)first_frame();for(var i in t.pipes){if(pipes_state[i].pressed)target=t.pipes[i][2]*32;else target=t.pipes[i][1]*32;if(pipes_state[i].y>target)pipes_state[i].y=Math.max(pipes_state[i].y-4,target);else if(pipes_state[i].y<target)pipes_state[i].y=Math.min(pipes_state[i].y+4,target);end_pipe=false;for(var k=~~(pipes_state[i].y/32)+1;k<21;k++)if(k<20&&!is_solid(tile_at(t.pipes[i][0]*32,k*32))&&!is_solid(tile_at(t.pipes[i][0]*32+1*32,k*32))&&!end_pipe){draw_tile(18,t.pipes[i][0],k);draw_tile(19,t.pipes[i][0]+1,k)}else{end_pipe=true;pipes_state[i].y_base=k*32;break}draw_sprite(16,t.pipes[i][0]*32,pipes_state[i].y+40);draw_sprite(17,t.pipes[i][0]*32+32,pipes_state[i].y+40);if(t.pipes[i][4])if(pipes_state[i].pressed)draw_tile(21,t.pipes[i][3],t.pipes[i][4]);else draw_tile(20,t.pipes[i][3],t.pipes[i][4])}parse_draw_map();yellow_toggle=false;for(j=0;j<20;j++)for(i=0;i<40;i++)if(t.tiles[j][i]==25)t.tiles[j][i]=11;for(i in t.pipes)pipes_state[i].pressed=false;current_hero.weight=1;for(i in t.cubes)t.cubes[i].weight=1;for(i in t.balances){balances_state[i].weight1=0;balances_state[i].weight2=0}for(hero in heros)play_hero(heros[hero],1);if(heros.length)hero=-1;else hero=0;play_hero(current_hero);for(i in t.cubes){if(tile_at(t.cubes[i].x+1,t.cubes[i].y+1)!=4&&tile_at(t.cubes[i].x+32-1,t.cubes[i].y+1)!=4&&tile_at(t.cubes[i].x+1,t.cubes[i].y+31)!=4&&tile_at(t.cubes[i].x+32-1,t.cubes[i].y+31)!=4)t.cubes[i].in_portal=false;if(t.cubes[i].teleport_idle)t.cubes[i].teleport_idle--;if(t.cubes[i].hero===null){if(!t.cubes[i].teleport_idle&&!is_solid(tile_at(t.cubes[i].x,t.cubes[i].y+31))&&!is_solid(tile_at(t.cubes[i].x+31,t.cubes[i].y+31)))if(t.cubes[i].vx>1)t.cubes[i].vx-=1;else if(t.cubes[i].vx<-1)t.cubes[i].vx+=1;else t.cubes[i].vx=0;gravity_and_collisions(t.cubes[i],32,1)}c.drawImage(b,12*16,0,16,16,t.cubes[i].x,40+t.cubes[i].y,32,32)}for(hero in heros)draw_hero(heros[hero],1);draw_hero(current_hero);for(i in j={"blue":blue_portal,"orange":orange_portal})draw_tile(4,j[i].q,j[i].r);for(i in j={"blue":blue_portal,"orange":orange_portal}){c.fillStyle=i;if(j[i].side==0)c.fillRect(j[i].q*32,j[i].r*32+40-8,32,8);if(j[i].side==1)c.fillRect(j[i].q*32+28,j[i].r*32+40,8,32);if(j[i].side==2)c.fillRect(j[i].q*32,j[i].r*32+40+28,32,8);if(j[i].side==3)c.fillRect(j[i].q*32-4,j[i].r*32+40,8,32)}if(yellow_toggle!=yellow_toggle_last_frame){mkaudio(SNDswitch0).play();for(j=0;j<20;j++)for(i=0;i<40;i++)if(t.tiles[j][i]==9)t.tiles[j][i]=10;else if(t.tiles[j][i]==10)t.tiles[j][i]=9}yellow_toggle_last_frame=yellow_toggle;for(i in t.balances){if(balances_state[i].weight1>balances_state[i].weight2&&!is_solid(tile_at(t.balances[i][0]*32-32,balances_state[i].y1+20))&&!is_solid(tile_at(t.balances[i][0]*32,balances_state[i].y1+20))&&!is_solid(tile_at(t.balances[i][0]*32+32,balances_state[i].y1+20))&&!is_solid(tile_at(t.balances[i][2]*32-32,balances_state[i].y2-4))&&!is_solid(tile_at(t.balances[i][2]*32,balances_state[i].y2-4))&&!is_solid(tile_at(t.balances[i][2]*32+32,balances_state[i].y2-4))){balances_state[i].y1+=4;balances_state[i].y2-=4}else if(balances_state[i].weight2>balances_state[i].weight1&&!is_solid(tile_at(t.balances[i][2]*32-32,balances_state[i].y2+20))&&!is_solid(tile_at(t.balances[i][2]*32,balances_state[i].y2+20))&&!is_solid(tile_at(t.balances[i][2]*32+32,balances_state[i].y2+20))&&!is_solid(tile_at(t.balances[i][0]*32-32,balances_state[i].y1-4))&&!is_solid(tile_at(t.balances[i][0]*32,balances_state[i].y1-4))&&!is_solid(tile_at(t.balances[i][0]*32+32,balances_state[i].y1-4))){balances_state[i].y1-=4;balances_state[i].y2+=4}c.beginPath();c.strokeStyle="#fff";c.lineWidth=2;c.moveTo(t.balances[i][0]*32+16,balances_state[i].y1+40+8);c.lineTo(t.balances[i][2]*32+16,balances_state[i].y2+40+8);c.stroke();c.closePath();draw_sprite(15,t.balances[i][0]*32-32,balances_state[i].y1+40);draw_sprite(15,t.balances[i][0]*32,balances_state[i].y1+40);draw_sprite(15,t.balances[i][0]*32+32,balances_state[i].y1+40);draw_sprite(15,t.balances[i][2]*32-32,balances_state[i].y2+40);draw_sprite(15,t.balances[i][2]*32,balances_state[i].y2+40);draw_sprite(15,t.balances[i][2]*32+32,balances_state[i].y2+40)}frame++;if(!win)chrono++;c.font="bold 100px arial";c.fillStyle="#000";c.textAlign="center";if(win){win_frame++;c.fillText("CLEARED!",640,300);c.font="bold 30px arial";if(n==1){c.fillRect(450,350,400,130);c.fillStyle="#fff";document.title=chrono;c.fillText("Time: "+(chrono/30).toFixed(2)+"s",640,400);c.fillText("Dev record: "+(t.record/30).toFixed(2)+"s",640,450);if(localStorage["scpm"+s])localStorage["scpm"+s]=Math.min(+localStorage["scpm"+s],chrono);else localStorage["scpm"+s]=chrono}}if(current_hero.state==3){lose_frame++;c.fillText("LOST!",640,350)}for(hero in heros)if(heros[hero].state==3||heros[hero].last_frame<frame&&!heros[hero].safe&&!win){paradox_frame++;c.fillText("PARADOX!",640,350)}if(win_frame==1)mkaudio(SNDwin0).play();if(lose_frame==1)mkaudio(SNDdie0).play();if(paradox_frame==1)mkaudio(SNDglitch1).play();if(lose_frame>=30){a.width^=0;clearInterval(ad);d=n;t.tested=true;a.width^=0;draw_screen()}if(paradox_frame)for(m=~~(paradox_frame/5);m--;)c.drawImage(a,i=Math.random()*1280,j=Math.random()*648,k=Math.random()*1280,l=Math.random()*648,i+Math.random()*100-50,j+Math.random()*100-50,k,l);if(win_frame>=90){chrono=0;if(n==1){s++;localStorage["scpm"]=Math.max(+localStorage["scpm"],s)}a.width^=0;clearInterval(ad);d=n;t.tested=true;a.width^=0;draw_screen()}if(lose_frame>=30||paradox_frame>=60){a.width^=0;clearInterval(ad);d=n;t.tested=false;a.width^=0;draw_screen()}},33)}if(d==3){a.style.cursor="pointer";c.strokeStyle="#777";c.lineWidth=1;c.fillStyle="#fff";c.fillRect(0,0,1280,648);c.fillStyle="#5C94FC";c.fillRect(0,40,1280,640);c.beginPath();for(i=0;i<16;i++){c.fillRect(8+i*35,3,32,32);c.rect(8+i*35,3,32,32);draw_sprite(i,8+i*35,3)}c.stroke();c.closePath();if(!no_reset)if(t.hash){t.tiles=[];for(var j=0;j<20;j++){t.tiles[j]=[];for(var i=0;i<40;i++)t.tiles[j][i]=t.hash.charCodeAt(j*40+i)-48}}for(j=0;j<t.tiles.length;j++)for(i=0;i<t.tiles[j].length;i++){drawn_tile=t.tiles[j][i];draw_tile(drawn_tile,i,j);if(drawn_tile==2){end_pole=false;if(j<20)for(k=j+1;k<20;k++)if(!t.tiles[k][i]&&!end_pole)draw_tile(24,i,k);else end_pole=true}}for(i in t.pipes){pipe_low=t.pipes[i][1];if(t.pipes[i][2]){pipe_high=t.pipes[i][1]<t.pipes[i][2]?t.pipes[i][1]:t.pipes[i][2];pipe_low=t.pipes[i][1]<t.pipes[i][2]?t.pipes[i][2]:t.pipes[i][1];for(k=pipe_high+1;k<pipe_low;k++){draw_tile(18,t.pipes[i][0],k);draw_tile(19,t.pipes[i][0]+1,k);t.tiles[k][t.pipes[i][0]]=18;t.tiles[k][t.pipes[i][0]+1]=19}}if(t.pipes[i][1]){end_pipe=false;for(k=pipe_low+1;k<21;k++)if(k<20&&!t.tiles[k][t.pipes[i][0]]&&!t.tiles[k][t.pipes[i][0]+1]&&!end_pipe){draw_tile(18,t.pipes[i][0],k);draw_tile(19,t.pipes[i][0]+1,k)}else end_pipe=true}if(t.pipes[i][1]){draw_tile(16,t.pipes[i][0],t.pipes[i][1]);draw_tile(17,t.pipes[i][0]+1,t.pipes[i][1]);t.tiles[t.pipes[i][1]][t.pipes[i][0]]=16;t.tiles[t.pipes[i][1]][t.pipes[i][0]+1]=17}if(t.pipes[i][2]){draw_tile(16,t.pipes[i][0],t.pipes[i][2]);draw_tile(17,t.pipes[i][0]+1,t.pipes[i][2]);t.tiles[t.pipes[i][2]][t.pipes[i][0]]=16;t.tiles[t.pipes[i][2]][t.pipes[i][0]+1]=17}if(t.pipes[i][4])draw_tile(20,t.pipes[i][3],t.pipes[i][4])}for(i in t.balances){if(t.balances[i][3]){c.beginPath();c.strokeStyle="#fff";c.lineWidth=2;c.moveTo(t.balances[i][0]*32+16,t.balances[i][1]*32+40+8);c.lineTo(t.balances[i][2]*32+16,t.balances[i][3]*32+40+8);c.stroke();c.closePath();draw_tile(15,t.balances[i][2]-1,t.balances[i][3]);draw_tile(15,t.balances[i][2],t.balances[i][3]);draw_tile(15,t.balances[i][2]+1,t.balances[i][3]);t.tiles[t.balances[i][3]][t.balances[i][2]-1]=15;t.tiles[t.balances[i][3]][t.balances[i][2]]=15;t.tiles[t.balances[i][3]][t.balances[i][2]+1]=15}if(t.balances[i][1]){draw_tile(15,t.balances[i][0]-1,t.balances[i][1]);draw_tile(15,t.balances[i][0],t.balances[i][1]);draw_tile(15,t.balances[i][0]+1,t.balances[i][1]);t.tiles[t.balances[i][1]][t.balances[i][0]-1]=15;t.tiles[t.balances[i][1]][t.balances[i][0]]=15;t.tiles[t.balances[i][1]][t.balances[i][0]+1]=15}}if(r>=0&&!p)if(current_editor_tile==1){if(r>0){draw_tile(22,q,r-1);draw_tile(23,q,r)}}else if(current_editor_tile==14){if(pipe_click==0){draw_tile(16,q,r);draw_tile(17,q+1,r)}if(pipe_click==1){draw_tile(16,t.pipes[current_pipe][0],r);draw_tile(17,t.pipes[current_pipe][0]+1,r)}if(pipe_click==2)draw_tile(20,q,r)}else if(current_editor_tile==15){draw_tile(15,q-1,r);draw_tile(15,q,r);draw_tile(15,q+1,r)}else draw_tile(current_editor_tile,q,r);c.beginPath();c.strokeStyle="#777";c.lineWidth=1;for(i=0;i<40;i++){c.moveTo(i*32,40);c.lineTo(i*32,648)}for(j=0;j<20;j++){c.moveTo(0,40+j*32);c.lineTo(1280,40+j*32)}c.fillStyle="#000";c.fillRect(750,4,100,32);c.fillRect(875,4,100,32);c.fillRect(1E3,4,100,32);c.fillRect(1125,4,100,32);c.fillStyle="#fff";c.font="bold 20px arial";c.fillText("TEST",800,28);c.fillText("SHARE",925,28);c.fillText("CLEAR",1050,28);c.fillText("EXIT",1175,28);c.stroke();c.closePath();c.beginPath();i=current_editor_tile;c.strokeStyle="red";c.lineWidth=3;c.rect(8+i*35,3.5,32,32);c.stroke();c.closePath()}};onhashchange=function(){if(location.hash){t=JSON.parse(decodeURIComponent(location.hash.slice(1)));d=2;draw_screen()}};onhashchange();mkaudio=function(fn){var data=[];for(var i=0;;i++){var smp=fn(i);if(smp===null)break;data.push(smp)}var l=data.length;var l2=l*2;var b32=function(v){var s=0;var b="";for(var i=0;i<4;i++,s+=8)b+=String.fromCharCode(v>>s&255);return b};var b16=function(v){var b=b32(v);return b[0]+b[1]};var SR=48E3;var b="RIFF"+b32(l2+36)+"WAVEfmt "+b32(16)+b16(1)+b16(1)+b32(SR)+b32(SR*2)+b16(2)+b16(16)+"data"+b32(l2);for(var i in data)b+=b16(data[i]*1E4);return new Audio("data:audio/wav;base64,"+btoa(b))};P=Math.pow;S=Math.sin;T=function(i,n){return(n-i)/n};SNDjump2=function(i){i=i*1.5;var n=2E4;if(i>n)return null;return(P(i,1.075)&128?1:-1)*P(T(i,n),2)};SNDdie0=function(i){var n=5E4;if(i>n)return null;return(P(i,.9)&200?1:-1)*P(T(i,n),3)};SNDbrick1=function(i){var n=5E3;if(i>n)return null;return(P(i+S(i*.01)*1E3,.8)&200?.5:-.5)*P(T(i,n),1)};SNDglitch1=function(i){var n=9E4;if(i>n)return null;return(P(i+S(i*.01)*1E3,.8)&200?.5:-.5)*P(T(i,n),1)};SNDcoin1=function(i){var n=16E3;var c=n/7;if(i>n)return null;var q=P(T(i,n),2.1);return(i<c?i+S(-i/900)*10&16:i&13)?q:-q};SNDwin0=function(i){var notes=[0,4,7,12,undefined,7,12];var n=4E4;if(i>n)return null;var idx=notes.length*i/n|0;var note=notes[idx];if(note===undefined)return 0;var r=P(2,note/12)*.8;var q=T(i*notes.length%n,n);return i*r&64?q:-q};SNDswitch0=function(i){var n=7E3;if(i>n)return null;return((i^i>>3^i*i*7.3^i<<4)&65535)/65536*T(i,n)};SNDtimetravel0=function(i){var n=5E4;var n1=1E5;if(i>n)return null;i=P(i,1.2-S(i/n1))*7;var x=S(i/30+S(i/1500));return P(x,9)*T(i,n)};©2009 Google - Terms of Service - Privacy Policy - Google Home</script>