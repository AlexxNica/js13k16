
// Globals
  
// Canvas context 2D
var c = a.getContext("2d");

// Init local storage to 1 if it's not already set
localStorage["scpm"] = 10;

// Current screen (0: main menu / 1: level selection / 2: playing / 3: editor)
var screen = 1;

// Previous screen (when we quit a level, 0: when playing a shared level / 1: when playing a built-in level / 3: whe testing a level in the level eitor)
var last_screen = 0;

// Mouse down (player is clicking)
var mousedown = false;

// Player is right clicking
var rightclick = false;

// Hero's width (not 32px in order to pass easily between two blocks)
var hero_width = 24;

// Gravity (downwards acceleration):
var gravity = 2;

// Max fall speed (for hero and cubes)
var max_fall_speed = 24;

// Jump speed (upwards vy force):
var jump_speed = 20;

// Walk speed (horizontal vx)
var walk_speed = 6;

// Mouse coords (in tiles)
var tile_x = tile_y = 0;

// Mouse coords (in px)
var x = y = 0;

// Current level
var level = 0;

// All the data of the current level
var level_data = {};

// Other globals (editor)
var pipe_click, current_pipe, balance_click, current_balance, current_editor_tile, mouse_tile_x, mouse_tile_y, pipe_high, pipe_low, end_pipe, end_pole, number, drawn_tile;

// Other globals (gameplay)
var win, win_frame, coins_left, loop, frame, current_hero, solid, yellow_toggle, yellow_toggle_last_frame, pipes_state, balances_state, yellow_toggle_delay, yellow_toggle_on, blue_portal, orange_portal, temp_side, heros, hero, target, current_cube, portals, current_portal;

// Built-in levels:
var levels = [
  
{},
  
{"hash":"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000006060600000000000000006000000000000000000000000000004004000000000000000000000F000000000000044004400000000000000000000G00000000000044400444000070000700000400333333333333333330033333333333333333333333333333333333333003333333333333333333330000000000000000000000000000000000000000","pipes":[[]],"balances":[]},

{"hash":"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000006006006000000000000000000002000000500500500500500004400400000000000000F000000000000000000044400440000000000000G00000000000000000044440044400077000000333333333333333333333333333333333333333333333333333333333333333333333333333333330000000000000000000000000000000000000000","pipes":[],"balances":[]},

{"hash":"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004004008008008000002000000600600600004000000000000000000000000F000000000000044400000000000000000000000G00000000000044444000000000000000000000333888888888888888888888888888888888833333388888888888888888888888888888888883330000000000000000000000000000000000000000","pipes":[],"balances":[]},

{"hash":"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000002000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000600000000000000000000000000000000000000000000000000600000000000000000000000000006000000000000000000000000000000000000000000000000006000000000000004400000000000060000<00<00000000<00<00<004400000<00<0000000000000040000000000000044000000000000400000000004400000000000004400F000000000440000000004440000000000004400G0000000004440000000044440000000000044333333333333333333333333333333333333333333333333333333333333333333333333333333330000000000000000000000000000000000000000","pipes":[],"balances":[]},

{"hash":"00000000000000000000000000000000000000000000000<000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000099999000000000000000000000000000000000000000900000000000000000000000000000000000::::900000000000000000000000000000000000000090000000000000000000000000000000000099999000000000000000000000000000000000000000900000000000000000000000000000000000::::9000000000000000000000000000020000000000900000000<000000000000000000000000009999900000000500000000000000000000000000000090000000000000000000000000000400F000000090000000000000000000000000000400G000;00090000;0000000;00000;00000;000403333333333333333333999999933333:::::::3333333333333333333330000000000000000000330000000000000000000000000000000000000000","pipes":[],"balances":[]},

{"hash":"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000<0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004444000000000000000333333333330000000000000000000000000000000000000000000000000000000000000000000000<000020000000000000000000000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000000033300000000000000000000000000000000000003300000000000000000000000000000000000000330000000F000000000000000000000000000000330000000G00000000000000000000000000000033000000333333333333333333333333333333333333333333333333333333333333333333333333333333330000000000000000000000000000000000000000","pipes":[[8,8,16,6,16],[24,16,7,22,16],[37,7,16,29,6]],"balances":[]},

{"hash":"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000<00000000000000000000000000000000000000000000000000000000000000000000000000000099900000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000F000000000000000000000000000000000000000G0000000000000000000000000000000000000\
3333330000000000000000000000000000000040\
3333330000000000000000000000000000000040\
0000000000000000000000000000000000000040\
000000000000000000;000060000000033333333\
0000000000000000333330060000000033333333\
0000000000000000333330060000000000000000\
0000000000000000000000000000000000000000\
0000000000000000000000000000000000000000\
0000000000000000000000000000000000000000\
0000000000000000000000000000000000000000\
0000000000000000000000000000000000000000","pipes":[],"balances":[[8,9,13,17],[28,6,23,14]]},

{"hash":"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004444444444444000000000000000000000000000300000000000000000000000000000000000040030606060600000000000000000000000000604003000000000<000000000000000000000000004003000000000000000000000000000000000000400300000444444400000000000000000000000040030000030000000000000000000000000000004003000003000000000000000000000000000000400300000300000000000000000000000000000040030000030000000000000000000000000000004003000003000000000000000000200000000000400300000300000000000000000000000000000040\
0400F00400000000000000000000000000000040\
0400G0040000000000000000000000000000;040\
044444440000000000000000003::::::::33330\
0000000000000000000000000000000000000000\
0000000000000000000000000000000000000000","pipes":[],"balances":[]},

{"hash":"000000000000000000000000000000000000000004444000000000000000000000000000000000000400000000000000000000000000000000000000040000000000000000000000000000000000000004000000000000000000000000000000000000000400000000000000000000000000000000000000040000000000000000000000000000000000000004000000000000000000000000000000000000000400000000000000000000000000000000000000040000000000000000000000000000000000000004000000000000000000000000000000000000000400000000006000000000000000000000000000040000000000000000000000000000000000000004000000000000000000000000000000000002000400000000000000000000000000000000000000040000F000000000000000000000000000000000040000G000000000000000000000000000000000044444444444400000000000088888888888888000000000000000000000000000000000000000000000000000000000000000000000000000000000","pipes":[],"balances":[]},

{"hash":"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000888888888888888888880000000000000000000030000000000000000008000000000000000000003000000000000000000800000000000000000000300200000000000000080000000000000000000030000000000000000008000000000000000000003000000000006000000800000000000000000000300000000000000000080000000000000000000044444444444440600008000000000000000000003000000000000000000800000000000000000000300000000000600000080000000000000000000030000000000000000008000000000000000000003000000000000000000800000000000000000000300F000000000000000800000000000000000000300G000000000000000800000000000000000000444444444444000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","pipes":[],"balances":[]},


];
